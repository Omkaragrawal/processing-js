<html>
<head>
  <script src="../../../processing.js"></script>
 
  <script type="text/javascript">
    var c=0;
    var t;
    var timer_is_on=0;
    var increment =0;
    var files = new Array("flowers.pjs");
    
    function timedCount()
    {
      var oRequest = new XMLHttpRequest();
      //var sURL  = "http://matrix.senecac.on.ca/~asobiepa/Processing/Demo/"+ files[increment];
      var sURL = files[increment];
      oRequest.open("GET",sURL,false);
      oRequest.setRequestHeader("User-Agent",navigator.userAgent);

      oRequest.send(null)

      if (oRequest.status==0){ 
        //document.getElementById("canvasdiv").removeChild(document.getElementById("actual"));
        //var can = document.createElement("canvas");
        //can.id = "actual";
        //can.width =400;
        
        //document.getElementById("canvasdiv").appendChild(can);
        try {
          Processing(document.getElementById("actual"), oRequest.responseText); 
          t=setTimeout("timedCount()",7000);
          
        }
        catch(r){t=setTimeout("timedCount()",1);}
       
        
      }else { alert("Error executing XMLHttpRequest call!"); }

      increment++;
      if(increment >= files.length){ increment =0;}
     
    }

    function doTimer()
    {
    if (!timer_is_on)
      {
      timer_is_on=1;
      timedCount();
      }
    }
  </script> 
</head>
<body onClick="doTimer()">
<h2></h2>

<div id="canvasdiv" >
<canvas id="actual"></canvas>

</div>


</body>
</html>